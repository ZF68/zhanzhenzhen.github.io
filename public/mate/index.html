<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Mate Tutorial</title>
    <link rel="stylesheet" href="../highlight-custom.css" type="text/css" />
    <link rel="stylesheet" href="../manual.css" type="text/css" />
    <style type="text/css">
        table.comparison {
            font-size: 0.85rem;
        }
        table.comparison th {
            font-size: 1rem;
            width: 50%;
        }
        table.comparison td {
            width: 50%;
            border: 0.1em solid rgb(192,192,192);
            padding: 0.5em 1.5em;
        }
        table.comparison pre {
            border: none;
            padding: 0;
            font-size: 1em;
        }
    </style>
    <script src="../doc-html.js" type="text/javascript"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-19880790-4', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="../3rd-party/highlight/highlight.pack.js" type="text/javascript"></script>
    <script src="../mate.b.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function() {
            var naturalLangs = ["en", "zh"];
            var programLangs = ["js", "coffee"];
            var navigatorLang = navigator.language;
            // for IE 9, 10
            if (navigatorLang === undefined) {
                navigatorLang = navigator.userLanguage;
            }
            if (navigatorLang.search(/^zh(-.*)?$/) !== -1) {
                setLang("zh", naturalLangs);
            }
            else {
                setLang("en", naturalLangs);
            }
            setLang("js", programLangs);
            document.getElementById("preferJS").addEventListener("click", function() {
                setLang("js", programLangs);
                location.href = "#setLang";
            });
            document.getElementById("preferCoffee").addEventListener("click", function() {
                setLang("coffee", programLangs);
                location.href = "#setLang";
            });
            document.getElementById("referenceLink").addEventListener("click", function() {
                location.href = "#reference";
            });
            document.getElementById("githubLink").addEventListener("click", function() {
                location.href = "https://github.com/zhanzhenzhen/mate";
            });
            document.getElementById("englishButton").addEventListener("click", function() {
                setLang("en", naturalLangs);
            });
            document.getElementById("chineseButton").addEventListener("click", function() {
                setLang("zh", naturalLangs);
            });
            document.getElementById("downloadLink").href =
                    "https://github.com/zhanzhenzhen/mate/archive/v" +
                    npmMate.packageInfo.version + ".zip";
            hljs.initHighlighting();
        });
    </script>
</head>
<body>
<table style="border-bottom: 0.15rem solid rgb(128,128,128);"><tr>
    <td style="width: 20%;">
        <span style="font-family: Quando; font-weight: 400; font-size: 4em;">mate</span>
    </td>
    <td style="width: 80%; text-align: right;">
        <div id="englishButton" class="button grey" style="display: inline-block;">English</div>
        <div id="chineseButton" class="button grey" style="display: inline-block;">中文</div>
        <div id="githubLink" class="button grey" style="display: inline-block;">GitHub</div>
    </td>
</tr></table>
<p><span class="en">Mate is your JavaScript/CoffeeScript mate that brings these key features:</span><span class="zh">Mate是你的JavaScript/CoffeeScript伴侣，它有如下特性：</span></p>
<ul>
    <li><a href="#event"><span class="en">A new way of handling events</span><span class="zh">新颖的类事件</span></a></li>
    <li><a href="#array"><span class="en">Array extensions</span><span class="zh">数组增强</span></a></li>
    <li><span class="en">Advanced timers</span><span class="zh">高级计时器</span></li>
    <li><span class="en">"Functional" functions</span><span class="zh">函数式</span></li>
    <li><span class="en">2D point & complex math</span><span class="zh">二维点、复数学</span></li>
    <li><span class="en">ECMAScript 6th features</span><span class="zh">ECMAScript 6th 特性</span></li>
    <li><a href="#testing"><span class="en">Very natural testing</span><span class="zh">自然至极的测试</span></a></li>
</ul>
<p><span class="en">Mate performs consistently in all modern browsers and node.js.</span><span class="zh">Mate在所有新式浏览器和node.js中都能完美运行。</span></p>
<div id="setLang" style="margin-top: 1rem;">
    <div id="preferJS" class="button blue" style="display: inline-block;"><span class="en">I prefer JavaScript</span><span class="zh">我偏好JavaScript</span></div>
    <div id="preferCoffee" class="button blue" style="display: inline-block;"><span class="en">I prefer CoffeeScript</span><span class="zh">我偏好CoffeeScript</span></div>
    <div id="referenceLink" class="button grey" style="display: inline-block;"><span class="en">Reference</span><span class="zh">参考</span></div>
</div>
<h2><span class="en">Comparison</span><span class="zh">比较</span></h2>
<p><span class="en">Mate on the left, traditional way on the right.</span><span class="zh">左边用了Mate，右边是传统方法。</span></p>
<table class="comparison">
    <tr>
        <th>Mate</th>
        <th><span class="en">Traditional Way</span><span class="zh">传统方法</span></th>
    </tr>
    <tr>
        <td>
            <p><span class="en">Check if a string starts with a substring:</span><span class="zh">判断字符串的开头部分：</span></p>
            <pre><code class="js">
                "hey you".startsWith("hey")
            </code></pre>
        </td>
        <td>
            <p><span class="en">Built-in:</span><span class="zh">原生：</span></p>
            <pre><code class="js">
                "hey you".indexOf("hey") == 0
            </code></pre>
            <p><span class="en">Or use "Underscore.js":</span><span class="zh">或使用Underscore.js：</span></p>
            <pre><code class="js">
                _.str.startsWith("hey you", "hey")
            </code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <p><span class="en">Let <i>time</i> be 5 seconds after the current time.</span><span class="zh">令<i>time</i>为当前时间之后5秒。</span></p>
            <pre><code class="js">
                time = new Date().add(5000)
            </code></pre>
        </td>
        <td>
            <pre><code class="js">
                time = new Date(new Date().getTime() + 5000)
            </code></pre>
            <p><span class="en">or</span><span class="zh">或</span></p>
            <pre><code class="js">
                time = new Date(Date.now() + 5000)
            </code></pre>
            <p><span class="en">or</span><span class="zh">或</span></p>
            <pre><code class="js">
                time = new Date(new Date() - (-5000))
            </code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <p><span class="en">Let <i>myArray</i> be [0,0,0,...] (length=100).</span><span class="zh">令<i>myArray</i>为[0,0,0,...] (length=100)。</span></p>
            <pre><code class="js">
                myArray = spread(0, 100)
            </code></pre>
        </td>
        <td>
            <pre>
                <code class="js">
                    myArray = [];
                    for (var i = 0; i < 100; i++) {
                        myArray.push(0);
                    }
                </code>
                <code class="coffee">
                    myArray = (0 for i in [0...100])
                </code>
            </pre>
        </td>
    </tr>
    <tr>
        <td>
            <p><span class="en">Let it throw an error.</span><span class="zh">抛出错误。</span></p>
            <pre><code class="js">
                fail()
            </code></pre>
        </td>
        <td>
            <pre><code class="js">
                throw new Error()
            </code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <p><span class="en">Testing:</span><span class="zh">测试：</span></p>
            <pre>
                <code class="js">
                    new Test().add(function(my, I) {
                        my.str = "hey you";
                        I.wish(' str.charAt(2)="y" ');
                        I.wish(' str.substr(4)="you" ');
                    }).run();
                </code>
                <code class="coffee">
                    new Test().add((my, I) ->
                        my.str = "hey you"
                        I.wish(' str.charAt(2)="y" ')
                        I.wish(' str.substr(4)="you" ')
                    ).run()
                </code>
            </pre>
        </td>
        <td>
            <pre>
                <code class="js">
                    something.describe(function() {
                        var str = "hey you";
                        assert.strictEqual(str.charAt(2), "y", 'str.charAt(2) is "y"');
                        assert.strictEqual(str.substr(4), "you", 'str.substr(4) is "you"');
                    });
                </code>
                <code class="coffee">
                    something.describe(->
                        str = "hey you"
                        assert.strictEqual(str.charAt(2), "y", 'str.charAt(2) is "y"')
                        assert.strictEqual(str.substr(4), "you", 'str.substr(4) is "you"')
                    )
                </code>
            </pre>
        </td>
    </tr>
</table>
<p><span class="en">And many, many more.</span><span class="zh">还有很多。</span></p>
<h2><span class="en">Usage</span><span class="zh">使用</span></h2>
<h3><span class="en">Try Mate:</span><span class="zh">试试Mate：</span></h3>
<p><span class="en">This page has already loaded Mate, so just try it in the web console. If you want to use Mate in your project, then follow the steps below.</span><span class="zh">本页面已经加载了Mate，所以你可以在Web控制台直接试验。如想在你的项目中使用Mate，那么请使用下面的方法。</span></p>
<ul>
    <li>
        <p><span class="en">Node.js:</span><span class="zh">Node.js：</span></p>
        <pre>
            <code class="js">
                require("mate");
            </code>
            <code class="coffee">
                require("mate")
            </code>
        </pre>
    </li>
    <li>
        <p><span class="en">Browser:</span><span class="zh">浏览器：</span></p>
        <p><a id="downloadLink" href="#downloadLink"><span class="en">Download</span><span class="zh">下载</span></a><span class="en">, then</span><span class="zh">，然后</span></p>
        <pre><code class="xml">
            &lt;script src="mate.b.min.js" type="text/javascript"&gt;&lt;/script&gt;
        </code></pre>
    </li>
</ul>
<h2 id="event"><span class="en">Class Events</span><span class="zh">类事件</span></h2>
<p><span class="en">Mate introduces a new way of defining events in a class: <b>eventField</b>. To define an event, assign <code>eventField()</code> to a property. An <code>eventField()</code> return value has methods <code>bind</code>, <code>unbind</code>, and <code>fire</code>. For example:</span><span class="zh">Mate引入了一种定义类事件的新方法：eventField。要在类中定义事件，只需把eventField()赋给一个属性，以后就可以用它的bind、unbind和fire方法了。例如：</span></p>
<pre>
    <code class="js">
        var Cat = function() {};
        Cat.prototype.onEat = eventField();
        Cat.prototype.onSay = eventField();
        Cat.prototype.eat = function() { this.onEat.fire(); };
        Cat.prototype.say = function() { this.onSay.fire(); };
    </code>
    <code class="coffee">
        class Cat
            onEat: eventField()
            onSay: eventField()
            eat: -> @onEat.fire()
            say: -> @onSay.fire()
    </code>
</pre>
<p><span class="en">Then, we</span><span class="zh">然后，我们</span></p>
<pre>
    <code class="js">
        var cat = new Cat();
        cat.onEat.bind(function() { console.log("eating!"); });
        cat.onSay.bind(function() { console.log("saying!"); });
        cat.say();
    </code>
    <code class="coffee">
        cat = new Cat()
        cat.onEat.bind(-> console.log("eating!"))
        cat.onSay.bind(-> console.log("saying!"))
        cat.say()
    </code>
</pre>
<p><span class="en">Alternatively, we can use a simplified format for <b>chaining</b>:</span><span class="zh">也可以用简化形式，以支持链式调用：</span></p>
<pre>
    <code class="js">
        new Cat()
        .onEat(function() { console.log("eating!"); })
        .onSay(function() { console.log("saying!"); })
        .say();
    </code>
    <code class="coffee">
        new Cat()
        .onEat(-> console.log("eating!"))
        .onSay(-> console.log("saying!"))
        .say()
    </code>
</pre>
<p><span class="en">Node.js already has <b>EventEmitter</b> class with <b>on</b> and <b>off</b> methods. But what Mate outperforms them is that it can give a more natural feeling. Think of the difference of feeling between <code>cat.onEat(...).onSay(...)</code> and <code>cat.on("eat", ...).on("say", ...)</code>. In the former form, events are first-class citizens. In the latter form, events are treated as second-class citizens, because <b>on</b> is a field and <b>"say"</b> is a sub-field. In this sense the former is better.</span><span class="zh">Node.js已经有一个具有on、off方法的EventEmitter类了，但Mate的优点在于它使你感觉更自然。思考下<code>cat.onEat(...).onSay(...)</code>和<code>cat.on("eat", ...).on("say", ...)</code>的区别。在前者，事件是一等公民。在后者，事件有点像二等公民，因为on是一个域而"say"只是一个“子域”。从这个意义上说前者更佳。</span></p>
<p>Alternatively, if you are not an <b>eventField</b> fan, you can use Mate's <b>EventedObject</b> class, which is similar to Node's <b>EventEmitter</b> but supports both browser and Node.</p>
<p><b>eventField</b> also has the ability to add an event as a <b>static</b> member of a class.</p>
<h2 id="array"><span class="en">Array Extensions</span><span class="zh">数组增强</span></h2>
<p><span class="en">Suppose we have a <b>students</b> array:</span><span class="zh">假设我们有一个students数组：</span></p>
<pre><code class="js">
    students = [
        {name: "Anna",     score: 80}, {name: "Brianna", score: 93},
        {name: "Chloe",    score: 72}, {name: "Destiny", score: 99},
        {name: "Emily",    score: 55}, {name: "Faith",   score: 87},
        {name: "Grace",    score: 81}, {name: "Hannah",  score: 79},
        {name: "Isabella", score: 87}, {name: "Jessica", score: 68},
        {name: "Kayla",    score: 53}, {name: "Lauren",  score: 90},
        {name: "Mia",      score: 83}, {name: "Nicole",  score: 95},
        {name: "Olivia",   score: 83}, {name: "Paige",   score: 76}
    ]
</code></pre>
<p><span class="en">The student with the highest score:</span><span class="zh">分数最高的同学：</span></p>
<pre>
    <code class="js">
        students.withMax(function(m) { return m.score; })
    </code>
    <code class="coffee">
        students.withMax((m) -> m.score)
    </code>
</pre>
<p><span class="en">Return value is {name: "Destiny", score: 99}.</span><span class="zh">返回值为 {name: "Destiny", score: 99}。</span></p>
<p><span class="en">The first student whose score is higher than 90:</span><span class="zh">第一个分数超过90分的同学：</span></p>
<pre>
    <code class="js">
        students.first(function(m) { return m.score > 90; })
    </code>
    <code class="coffee">
        students.first((m) -> m.score > 90)
    </code>
</pre>
<p><span class="en">Return value is {name: "Brianna", score: 93}.</span><span class="zh">返回值为 {name: "Brianna", score: 93}。</span></p>
<p><span class="en">The student with the 4th highest score:</span><span class="zh">分数第4高的同学：</span></p>
<pre>
    <code class="js">
        students.funSortDescending(function(m) { return m.score; }).at(3)
    </code>
    <code class="coffee">
        students.funSortDescending((m) -> m.score).at(3)
    </code>
</pre>
<p><span class="en">Return value is {name: "Lauren", score: 90}. Mate provides <b>funSort</b> and <b>funSortDescending</b> methods, both of which are functional thus have no side effects since they don't modify the array.</span><span class="zh">返回值是 {name: "Lauren", score: 90}。Mate提供了两种顺序的排序：funSort和funSortDescending，都是函数式的，没有副作用，因为不修改原来的数组。</span></p>
<p><span class="en"><b>at(n)</b> is similar to <b>[n]</b> but more powerful. It can be a 0 to 1 fraction, which means the percentage. So the following returns the same as above:</span><span class="zh">at(n)和[n]差不多，但更强大。它可以是0到1之间的小数，表示百分比。所以下面的表达式的结果和上面是一样的：</span></p>
<pre>
    <code class="js">
        students.funSortDescending(function(m) { return m.score; }).at(0.2)
    </code>
    <code class="coffee">
        students.funSortDescending((m) -> m.score).at(0.2)
    </code>
</pre>
<p><span class="en">0.2 means 20% position.</span><span class="zh">0.2表示20%的位置。</span></p>
<p><span class="en">Get a random sample of 5 students:</span><span class="zh">随机抽取5名学生：</span></p>
<pre><code class="js">
    students.random(5)
</code></pre>
<p><span class="en">Group students by score range (first digit), and give the number of students for each group:</span><span class="zh">对所有学生按分数高低分组，给出每个组的学生数量：</span></p>
<pre>
    <code class="js">
        students.group(
            function(m) { return Math.floor(m.score / 10); },
            function(m) { return m.length; }
        )
    </code>
    <code class="coffee">
        students.group(
            (m) -> Math.floor(m.score / 10),
            (m) -> m.length
        )
    </code>
</pre>
<p><span class="en">Result is: 50-59: 2 students, 60-69: 1 student, 70-79: 3 students ...</span><span class="zh">结果为：50-59：2名，60-69：1名，70-79：3名……</span></p>
<h2>Advanced Timers</h2>
<p>JavaScript's built-in timers <code>setTimeout</code> and <code>setInterval</code> are very simple. Also, in some way they are inaccurate. If you run <code class="js">setInterval((function() { console.log(new Date().toISOString()); }), 1000)</code><code class="coffee">setInterval((-> console.log(new Date().toISOString())), 1000)</code> then you will find its "next" time is determined by the current time and the interval, not determined by the "first" time and the interval. So the inaccuracy will increase over time. For example, you can't expect it to give notice for the first time on 10:00am and the 3601th time exactly on 11:00am.</p>
<p>That's why <code>Date.IntervalTimer</code> is introduced. In <code>Date.IntervalTimer</code> the total times between start time and end time can be guaranteed, and the inaccuracy at any time can be limited to within 30ms (by default).</p>
<pre>
    <code class="js">
        var now = new Date();
        new Date.IntervalTimer(1000, now.add(2000), now.add(2000 + 3600000))
        .onStart(function() { console.logt("started!"); })
        .onArrive(function() { console.logt("arrived!"); })
        .run();
    </code>
    <code class="coffee">
        now = new Date()
        new Date.IntervalTimer(1000, now.add(2000), now.add(2000 + 3600000))
        .onStart(-> console.logt("started!"))
        .onArrive(-> console.logt("arrived!"))
        .run()
    </code>
</pre>
<p>In the above example, the timer starts in 2 seconds and then a message "arrived!" is shown every second for 1 hour. Even at the end of the 1 hour duration, the timer is still very accurate. This example uses other Mate features: <code>Date::add</code> and <code>console.logt</code>.</p>
<h2>Function composition examples</h2>
<p>Example 1:</p>
<pre><code class="js">
    functionD(functionC(functionB(functionA(arg))))
</code></pre>
<p>Mate:</p>
<pre><code class="js">
    compose(functionA, functionB, functionC, functionD)(arg)
</code></pre>
<p>Example 2:</p>
<pre>
    <code class="js">
        a = functionD(functionC(functionB(functionA(x))));
        b = functionD(functionC(functionB(functionA(y))));
        c = functionD(functionC(functionB(functionA(z))));
    </code>
    <code class="coffee">
        a = functionD(functionC(functionB(functionA(x))))
        b = functionD(functionC(functionB(functionA(y))))
        c = functionD(functionC(functionB(functionA(z))))
    </code>
</pre>
<p>Mate:</p>
<pre>
    <code class="js">
        var f = compose(functionA, functionB, functionC, functionD);
        a = f(x);
        b = f(y);
        c = f(z);
    </code>
    <code class="coffee">
        f = compose(functionA, functionB, functionC, functionD)
        a = f(x)
        b = f(y)
        c = f(z)
    </code>
</pre>
<h2>Complex Math</h2>
<p>In Mate, we can do complex number computations by using <b>cmath</b> and <b>Point</b>. A complex number is a <code>Point</code> instance. We use this name because we want it to be a combination of 3 things: complex number, 2d point, and 2d vector.</p>
<p>For example, we want to calculate (2+3i)*(1+i). Any of these expressions returns -1+5i (i.e. {x: -1, y: 5}).</p>
<pre><code>
    cmath.multiply("2+3i", "1+i")
    new Point(2, 3).multiply(new Point(1, 1))
    Point.from("2+3i").multiply(Point.from("1+i"))
</code></pre>
<h2 id="testing"><span class="en">Testing</span><span class="zh">测试</span></h2>
<p><span class="en">Mate integrates a testing framework called "Wishlist". In Mate, the Test class is global. <a href="http://zhanzhenzhen.github.io/wishlist/">See Wishlist manual</a>.</span><span class="zh">Mate集成了测试框架Wishlist。在Mate中，Test类是全局的。<a href="http://zhanzhenzhen.github.io/wishlist/">查看Wishlist手册</a>。</span></p>
<h2 id="mateLike">What's Mate-like</h2>
<p>As you can see, Mate can give the simpliest form of code. This goal is achieved by adding global functions and appending properties to existing objects. In contrast, most libraries in the world, such as jQuery, Underscore and Backbone, packages everything into one namespace. These libraries are said to be "not Mate-like" in this article. We call a package to be "Mate-like" in this article if it adds global variables or existing object's properties.</p>
<p>Some typical Mate-like libraries are: sugar, es5-ext. For example, you know Mate has a <b>spread</b> global function. If these libraries have a global function also named <b>spread</b>, then collision happens. So it's not a good practice to have multiple Mate-like libraries together. You should only use <b>at most one</b> Mate-like library in every project.</p>
<p>A project that depends on Mate is also Mate-like. So, if your project depends on Mate and if your project is also a library people will depend on, then it's your duty to declare in README that it adds global things. Otherwise, people may mistakenly use your library together with another Mate-like library, then they will be at the risk of name collisions.</p>
<div>
    <div class="en"></div>
    <div class="zh">
        <h2>为什么叫Mate</h2>
        <p>“Java是咖啡的花哨别称，所以不花哨的JavaScript就是CoffeeScript。”——Jeremy Ashkenas（CoffeeScript作者）。既然它们本质上都是咖啡，那么自然也都有“伴侣(mate)”。</p>
    </div>
</div>
<h1 id="reference"><span class="en">Reference</span><span class="zh">参考</span></h1>
<p>(Note: Don't mix up the capitalized name and lowercased name. For example, <b>Date</b> means a class and <b>date</b> means its instance. Also, <code>::</code> means <code>.prototype.</code>.) <span class="en">Some features has not yet been added to the reference. In this case you can view my source code.</span><span class="zh">有些特性尚未写入参考，遇到这种情况你可以查看我的源代码。</span></p>
<ol>
    <li>Global Functions
        <ul>
            <li>compose<div>
                <p>Syntax 1: compose(function1, [function2, ...])<br />
                Syntax 2: compose(functionArray)</p>
                <p>Returns the math composition of functions. Functions can be passed as multiple arguments, or a single array argument.</p>
            </div></li>
            <li>fail<div>
                <p>Syntax: fail(errorMessage)</p>
                <p>Shorthand function for <code>throw new Error(errorMessage)</code>.</p>
            </div></li>
            <li>assert<div>
                <p>Syntax: assert(condition, [message])</p>
                <p>Tests if <b>condition</b> is truthy. If yes then returns <b>undefined</b>. Otherwise throws an error, which contains a <b>message</b> if <b>message</b> is specified.</p>
            </div></li>
            <li>repeat<div>
                <p>Syntax 1: repeat(iterator, times)<br />
                Syntax 2: repeat(times, iterator)</p>
                <p>Calls <b>iterator</b> function <b>times</b> times. Returns an array of <b>iterator</b> return values.</p>
            </div></li>
            <li>spread<div>
                <p>Syntax: spread(value, count)</p>
                <p>Returns a length=<b>count</b> array. In this array each element is <b>value</b>.</p>
            </div></li>
        </ul>
    </li>
    <li>eventField
        <ul>
            <li>eventField<div>
                <p>Syntax: eventField()</p>
                <p>Returns an object that has 3 methods: <b>bind</b>, <b>unbind</b>, <b>fire</b>. The return value is very special because it not only has object features but also is a function which itself can be treated as a method. The return value is referred to as an event field in this reference. These 3 methods and the return value itself are described as follows:</p>
            </div></li>
            <li>bind<div>
                <p>Syntax: eventField().bind(listener)</p>
                <p>Binds a listener to the event field, returning the current object.</p>
            </div></li>
            <li>unbind<div>
                <p>Syntax: eventField().unbind(listener)</p>
                <p>Unbinds a listener from the event field, returning the current object.</p>
            </div></li>
            <li>fire<div>
                <p>Syntax: eventField().fire([eventArgument])</p>
                <p>Fires the event. An optional <b>eventArgument</b> will be passed to listeners.</p>
            </div></li>
            <li>eventField()<div>
                <p>Syntax 1: eventField()(method, arg)<br />
                Syntax 2: eventField()(listener)</p>
                <p>For syntax 1, it's equivalent to <b>eventField()[method](arg)</b>, except that it returns the object that holds the event field.</p>
                <p>For syntax 2, it's equivalent to <b>eventField().bind(listener)</b>, except that it returns the object that holds the event field.</p>
                <p>This format is useful in chaining.</p>
            </div></li>
        </ul>
    </li>
    <li>Number
        <ul>
            <li>Number.EPSILON <small>ECMAScript 6th</small><div>
                <p>Syntax: Number.EPSILON</p>
                <p>The <b>Number.EPSILON</b> property has a value of approximately 2.2204460492503130808472633361816E-16. It represents the difference between one and the smallest value greater than one that can be represented as a <b>Number</b>.</p>
            </div></li>
            <li>Number.isInteger <small>ECMAScript 6th</small><div>
                <p>Syntax: Number.isInteger(x)</p>
                <p>Determines whether <b>x</b> is an integer.</p>
            </div></li>
        </ul>
    </li>
    <li>String
        <ul>
            <li>String::contains <small>ECMAScript 6th</small><div>
                <p>Syntax: str.contains(s)</p>
                <p>Determines whether <b>str</b> contains <b>s</b>, returning <b>true</b> or <b>false</b> as appropriate.</p>
            </div></li>
            <li>String::startsWith <small>ECMAScript 6th</small><div>
                <p>Syntax: str.startsWith(s)</p>
                <p>Determines whether <b>str</b> starts with <b>s</b>, returning <b>true</b> or <b>false</b> as appropriate.</p>
            </div></li>
            <li>String::endsWith <small>ECMAScript 6th</small><div>
                <p>Syntax: str.endsWith(s)</p>
                <p>Determines whether <b>str</b> ends with <b>s</b>, returning <b>true</b> or <b>false</b> as appropriate.</p>
            </div></li>
        </ul>
    </li>
    <li>Object
        <ul>
            <li>Object.clone<div>
                <p>Syntax: Object.clone(x)</p>
                <p>Creates a shallow copy of <b>x</b>.</p>
            </div></li>
        </ul>
    </li>
    <li>Array
        <ul>
            <li>Array.from <small>ECMAScript 6th</small><div>
                <p>Syntax: Array.from(arrayLike)</p>
                <p>Generates a real array from an array-like object (such as <b>arguments</b>), returning that array.</p>
            </div></li>
            <li>Array::clone<div>
                <p>Syntax: arr.clone()</p>
                <p>Creates a shallow copy of <b>arr</b>.</p>
            </div></li>
            <li>Array::contains<div>
                <p>Syntax: arr.contains(x)</p>
                <p>Determines whether <b>arr</b> contains <b>x</b>, returning <b>true</b> or <b>false</b> as appropriate.</p>
            </div></li>
            <li>Array::first<div>
                <p>Syntax: arr.first([predicate])</p>
                <p>Returns the first element in the array that passes the test in the <b>predicate</b> function. If <b>predicate</b> is not specified, returns the first element.</p>
            </div></li>
            <li>Array::last<div>
                <p>Syntax: arr.last([predicate])</p>
                <p>Returns the last element in the array that passes the test in the <b>predicate</b> function. If <b>predicate</b> is not specified, returns the last element.</p>
            </div></li>
            <li>Array::single<div>
                <p>Syntax: arr.single([predicate])</p>
                <p>Returns the only element in the array that passes the test in the <b>predicate</b> function. If <b>predicate</b> is not specified, returns the only element. If more than one, or empty, then throws an exception.</p>
            </div></li>
            <li>Array::funSort<div>
                <p>Syntax: arr.funSort([keySelector])</p>
                <p>Sorts the array in ascending order according to a key, returning the array. If key is not specified, then key is the element itself. Unlike the built-in <b>sort</b> method, <b>funSort</b> does not modify the array so doesn't have side effect.</p>
            </div></li>
            <li>Array::funSortDescending<div>
                <p>Syntax: arr.funSortDescending([keySelector])</p>
                <p>Sorts the array in descending order according to a key, returning the array. If key is not specified, then key is the element itself. This method does not modify the array so doesn't have side effect.</p>
            </div></li>
            <li>Array::group<div>
                <p>Syntax: arr.group([keySelector, [valueSelector]])</p>
                <p>Groups the elements of the array according to the key selector function, and creates a value from each group according to the value selector function. Returns an array of key-value pairs. A key-value pair is simply a 2-element array. If key selector is not specified, then key is the element itself. If value selector is not specified, then value is the group itself.</p>
                <p>Example 1: group numbers by even / odd</p>
                <pre class="js">
                    [1, 2, 3, 4, 5, 6].group(function(x) { return x % 2; })
                </pre>
                <pre class="coffee">
                    [1, 2, 3, 4, 5, 6].group((x) -> x % 2)
                </pre>
                <p>Returns:</p>
                <pre>
                    [ [ 0, [ 2, 4, 6 ] ],
                      [ 1, [ 1, 3, 5 ] ] ]
                </pre>
                <p>Example 2: group numbers by even / odd, then calculate the sum of all even numbers and the sum of all odd numbers.</p>
                <pre class="js">
                    [1, 2, 3, 4, 5, 6].group(
                        function(x) { return x % 2; },
                        function(g) { return g.sum(); }
                    )
                </pre>
                <pre class="coffee">
                    [1, 2, 3, 4, 5, 6].group(
                        (x) -> x % 2
                        (g) -> g.sum()
                    )
                </pre>
                <p>Returns:</p>
                <pre>
                    [ [ 0, 12 ],
                      [ 1, 9 ] ]
                </pre>
            </div></li>
            <li>Array::max<div>
                <p>Syntax: arr.max([selector])</p>
                <p>Invokes a transform function on each element and returns the maximum value. If selector is not specified, then returns the maximum element.</p>
            </div></li>
            <li>Array::min<div>
                <p>Syntax: arr.min([selector])</p>
                <p>Invokes a transform function on each element and returns the minimum value. If selector is not specified, then returns the minimum element.</p>
            </div></li>
            <li>Array::withMax<div>
                <p>Syntax: arr.withMax([selector])</p>
                <p>Similar to <b>max</b> method, but returns the element.</p>
            </div></li>
            <li>Array::withMin<div>
                <p>Syntax: arr.withMin([selector])</p>
                <p>Similar to <b>min</b> method, but returns the element.</p>
            </div></li>
            <li>Array::sum<div>
                <p>Syntax: arr.sum([selector])</p>
                <p>Computes the sum of the array of values that are obtained by invoking a transform function on each element, returning the sum. If selector is not specified, then returns the sum of elements.</p>
            </div></li>
            <li>Array::average<div>
                <p>Syntax: arr.average([selector])</p>
                <p>Computes the average of the array of values that are obtained by invoking a transform function on each element, returning the average. If selector is not specified, then returns the average of elements.</p>
            </div></li>
            <li>Array::flatten<div>
                <p>Syntax: arr.flatten([level])</p>
                <p>Flattens an array by levels. If <code>level</code> is not specified, then flattens the array completely. If <code>level</code> is specified, then it must be a positive integer. Returns the flattened array.</p>
            </div></li>
            <li>Array::except<div>
                <p>Syntax: arr.except(array)</p>
                <p>Returns the set difference of two arrays.</p>
            </div></li>
        </ul>
    </li>
    <li>Date
        <ul>
            <li>Date::add<div>
                <p>Syntax: date.add(milliseconds)</p>
                <p>Returns a new <b>Date</b> object that adds milliseconds to <b>date</b>.</p>
            </div></li>
            <li>Date::subtract<div>
                <p>Syntax 1: date.subtract(milliseconds)<br />
                Syntax 2: date.subtract(date2)</p>
                <p>For syntax 1, returns a new <b>Date</b> object that subtracts milliseconds from <b>date</b>.</p>
                <p>For syntax 2, returns the milliseconds between <b>date2</b> and <b>date</b>. If <b>date</b> is earlier than <b>date2</b>, then the return value is negative.</p>
            </div></li>
            <li>Date::equals<div>
                <p>Syntax: date1.equals(date2)</p>
                <p>Determines whether <b>date1</b> and <b>date2</b> are equal, returning <b>true</b> or <b>false</b> as appropriate. They are equal if and only if their represented milliseconds since epoch (i.e. their <b>getTime()</b> values) are equal.</p>
            </div></li>
        </ul>
    </li>
    <li>Math
        <ul>
            <li>Math.sign <small>ECMAScript 6th</small><div>
                <p>Syntax: Math.sign(x)</p>
                <p>Returns the sign of <b>x</b>, indicating whether <b>x</b> is positive, negative or zero.</p>
            </div></li>
            <li>Math.trunc(x) <small>ECMAScript 6th</small><div>
                <p>Returns the integral part of <b>x</b> by removing any fractional digits.</p>
            </div></li>
        </ul>
    </li>
    <li>Test<div>
        <p><a href="http://zhanzhenzhen.github.io/wishlist/#reference">See Wishlist reference</a>. The only difference is that in Mate the Test class can be directly used.</p>
    </div></li>
    <li>Other Utilities
        <ul>
            <li>console.logt<div>
                <p>Syntax: console.logt(message)</p>
                <p>Similar to <b>console.log</b>, but adds the current time (in ISO format) to the message.</p>
            </div></li>
            <li>JSON.clone<div>
                <p>Syntax: JSON.clone(x)</p>
                <p>Creates a deep copy of <b>x</b> where <b>x</b> must be a JSON object.</p>
            </div></li>
        </ul>
    </li>
</ol>
</body>
</html>
